---
const API_ENDPOINT = import.meta.env.API_ENDPOINT;
let data = await fetch(API_ENDPOINT+"/info");
let json_data = await data.json();
if (Astro.url.pathname === "/support") {
    return Astro.redirect(json_data.url);
} else if (Astro.url.pathname === "/invite") {
    let guild_id = Astro.url.searchParams.get('gid') || "";
    if (guild_id) {
        guild_id = "&guild_id=" + encodeURIComponent(guild_id)
    }
    return Astro.redirect(json_data.invite+guild_id);
}
---